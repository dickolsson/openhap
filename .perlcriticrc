# Perl::Critic configuration for OpenHAP
# Following OpenBSD pkg_add style (see style.pod)
severity = 4

#-----------------------------------------------------------------------------
# Allowed by OpenBSD style
#-----------------------------------------------------------------------------

# File permissions are intentionally octal (0644, 0600, etc.)
[-ValuesAndExpressions::ProhibitLeadingZeros]

# use constant is the OpenBSD way for constants
[-ValuesAndExpressions::ProhibitConstantPragma]

# Multiple packages per file is fine for related classes
[-Modules::ProhibitMultiplePackages]

# our @ISA is preferred over 'use parent' in OpenBSD style
[-ClassHierarchies::ProhibitExplicitISA]

# File handles need to stay open during flock operations
[-InputOutput::RequireBriefOpen]

# Modern Perl signatures handle prototypes differently
[-Subroutines::ProhibitSubroutinePrototypes]

# Postfix if/unless is fine for simple statements
[-ControlStructures::ProhibitPostfixControls]

# Empty parentheses on method calls without args is discouraged
# in OpenBSD style: $obj->method not $obj->method()
[-CodeLayout::ProhibitParensWithBuiltins]

#-----------------------------------------------------------------------------
# Relaxed for practical reasons
#-----------------------------------------------------------------------------

# Void subroutines don't need explicit return statements
[-Subroutines::RequireFinalReturn]

# Allow unless for simple conditions
[-ControlStructures::ProhibitUnlessBlocks]

# Regex can use modifiers without /x for simple patterns
[-RegularExpressions::RequireExtendedFormatting]

# Magic numbers are acceptable in context
[-ValuesAndExpressions::ProhibitMagicNumbers]

#-----------------------------------------------------------------------------
# Tabs are required (8-char tabs per style(9))
#-----------------------------------------------------------------------------
[CodeLayout::ProhibitHardTabs]
allow_leading_tabs = 1

#-----------------------------------------------------------------------------
# POD documentation - separate .pod files are acceptable
#-----------------------------------------------------------------------------
[-Documentation::RequirePodSections]
[-Documentation::RequirePodAtEnd]
